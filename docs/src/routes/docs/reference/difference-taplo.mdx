# Differences from Taplo

[Taplo](https://github.com/tamasfe/taplo) is already famous as a TOML Language Server.
However, I rewrote a new Language Server for the following purposes.

## Auto Sorting
Compared to Taplo, Tombi offers more granular sorting configuration by utilizing [JSON Schema metadata](/docs/formatter/auto-sorting#json-schema). These configuration options can also be distributed and shared via a [JSON Schema Store](https://www.schemastore.org).

## Cargo/uv Workspace Support

Tombi supports Cargo/uv workspaces.
When editing a `Cargo.toml` / `pyproject.toml` file, Tombi can navigate to the workspace definition or to the crate/package definition managed by the workspace.
Also, some Code Actions are available for workspace management.

See more details: [tombi-extension-cargo](/docs/extensions/tombi-extension-cargo) / [tombi-extension-uv](/docs/extensions/tombi-extension-uv)

## Go to JSON Schema Definition

Tombi supports "Go to Type Definition" feature.
When editing a TOML file with an applied JSON Schema, Tombi can navigate to the type definition of the JSON Schema.

See more details: [Go to Type Definition](/docs/language-server/goto-definition#goto-json-schema)

## Magic Trailing Comma
Formatter inspired by Python's [Black](https://github.com/psf/black) (Support for [magic trailing comma](https://black.readthedocs.io/en/stable/the_black_code_style/current_style.html#the-magic-trailing-comma))

This idea is great, it allows the user's code formatting intent to be expressed in code, not in a configuration.

I wanted to bring this idea to TOML.

## Support Comment Directive
Tombi supports more comment directives than Taplo. You can control TOML version, JSON Schema, lint rules, and other options flexibly with comments.

See more details: [Comment Directive](/docs/comment-directive/)

## Support sub-schema
Tombi can apply JSON Schema to specific keys such as `tools.*` in pyproject.toml from its configuration file. This is useful when utilizing extensions that are not registered in JSON Schema.

See more details: [Sub Schema](/docs/configuration#sub-schema)

## Support for TOML v1.1.0 (preview)
TOML will allow multi-line inline tables and trailing commas in the future v1.1.0.
This feature makes the magic trailing comma feature more valuable.
To provide that experience, Tombi will support TOML v1.1.0 features ahead of time.

See more details: [TOML Versions](/docs/reference/toml-versions)

## Stable Behavior Formatting
Taplo has a fundamental problem with the lexer.
When formatting an incomplete TOML file, the AST deletes elements.

Tombi does not format invalid syntax.

## Migration from Taplo

Tombi provides several formatting options to make it easy for Taplo users to migrate.  
The following table shows the correspondence between [Taplo's options](https://taplo.tamasfe.dev/configuration/formatter-options.html) and [Tombi's options](/docs/configuration#available-options):

<table>
  <thead>
    <tr>
      <th>Taplo Option</th>
      <th>Tombi Option</th>
      <th>Reason</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>align_entries</code></td>
      <td>[`key-value-equal-alignment`](/docs/configuration#format-rules-key-value-equal-alignment)</td>
      <td></td>
    </tr>
    <tr>
      <td><code>align_comments</code></td>
      <td>[`trailing-comment-alignment`](/docs/configuration#format-rules-trailing-comment-alignment)</td>
      <td></td>
    </tr>
    <tr>
      <td><code>array_trailing_comma</code></td>
      <td>Not supported</td>
      <td>Please use [Magic Trailing Comma](/docs/formatter/magic-trailing-comma).</td>
    </tr>
    <tr>
      <td><code>array_auto_expand</code></td>
      <td>Not supported</td>
      <td>Fixed `true` value.</td>
    </tr>
    <tr>
      <td><code>array_auto_collapse</code></td>
      <td>Not supported</td>
      <td>Please use [Magic Trailing Comma](/docs/formatter/magic-trailing-comma).</td>
    </tr>
    <tr>
      <td><code>compact_arrays</code></td>
      <td>
        [`array-comma-space-width`](/docs/configuration#format-rules-array-comma-space-width), <br />
        [`array-bracket-space-width`](/docs/configuration#format-rules-array-bracket-space-width)
      </td>
      <td></td>
    </tr>
    <tr>
      <td><code>compact_inline_tables</code></td>
      <td>
        [`inline-table-comma-space-width`](/docs/configuration#format-rules-inline-table-comma-space-width), <br />
        [`inline-table-brace-space-width`](/docs/configuration#format-rules-inline-table-brace-space-width)
      </td>
      <td></td>
    </tr>
    <tr>
      <td><code>inline_table_expand</code></td>
      <td>Not supported</td>
      <td>Fixed `true` value.</td>
    </tr>
    <tr>
      <td><code>compact_entries</code></td>
      <td>[`key-value-equal-space-width`](/docs/configuration#format-rules-key-value-equal-space-width)</td>
      <td></td>
    </tr>
    <tr>
      <td><code>column_width</code></td>
      <td>[`line-width`](/docs/configuration#format-rules-line-width)</td>
      <td></td>
    </tr>
    <tr>
      <td><code>indent_tables</code></td>
      <td>[`indent-sub-tables`](/docs/configuration#format-rules-indent-sub-tables)</td>
      <td></td>
    </tr>
    <tr>
      <td><code>indent_entries</code></td>
      <td>[`indent-table-key-values`](/docs/configuration#format-rules-indent-table-key-values)</td>
      <td></td>
    </tr>
    <tr>
      <td><code>indent_string</code></td>
      <td>
        [`indent-width`](/docs/configuration#format-rules-indent-width), <br />
        [`indent-style`](/docs/configuration#format-rules-indent-style)
      </td>
      <td></td>
    </tr>
    <tr>
      <td><code>trailing_newline</code></td>
      <td>Not supported</td>
      <td>Fixed `true` value.</td>
    </tr>
    <tr>
      <td><code>reorder_keys</code></td>
      <td>Not supported</td>
      <td>See [Auto Sorting](/docs/formatter/auto-sorting).</td>
    </tr>
    <tr>
      <td><code>reorder_arrays</code></td>
      <td>Not supported</td>
      <td>See [Auto Sorting](/docs/formatter/auto-sorting).</td>
    </tr>
    <tr>
      <td><code>reorder_inline_tables</code></td>
      <td>Not supported</td>
      <td>See [Auto Sorting](/docs/formatter/auto-sorting).</td>
    </tr>
    <tr>
      <td><code>allowed_blank_lines</code></td>
      <td>Not supported</td>
      <td>For [Auto Sorting](/docs/formatter/auto-sorting).</td>
    </tr>
    <tr>
      <td><code>crlf</code></td>
      <td>[`line-ending`](/docs/configuration#format-rules-line-ending)</td>
      <td></td>
    </tr>
  </tbody>
</table>
